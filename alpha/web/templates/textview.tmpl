#from awg.Tools import stem_to_int
 
#def render_external_data($d)
	#for r in $d:
		#if not $r.result
			#continue
		#end if

		<div class="external_data">
		  <div class="provider_name">  <a href="$r.url"> $r.provider </a> </div>
		  <div class="provider_content"> 
		  #if $r.provider.startswith("arabdict")
			$r.result
		  #else
			$r.result_as_html
		  #end if 
		</div>
		</div>
	#end for
#end def

#def verbstem_to_glyph($n)
  #set $n = $stem_to_int($n) + 1
  #if $n < 6:
     &#1010$n;
  #else
    &#1010$n;
  #end if
#end def

<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <title>Displaying entry $query</title>
  <style>
  body { direction: rtl; margin: 0px; width: 100%; font-size: 30px}
  input { font-size: 22px ; border: 0px; border-bottom: 1px solid white; background: black; color: white}
  div.header {width: 100%; color: white; background: black;
               font-size: 22px; }
  div.content { padding: 20px; font-size: 20px; line-height: 30px;  }

  a:link, a:visited {text-decoration: none; color: black}
  a:hover {text-decoration: underline}

  div.block { width: 300px; float: right; padding: 10px;
              border: 1px solid black; margin: 20px}


  h1, div.derived_nouns, span.verbstem, span.verbstem_no, a:link, a:visited { color: #993366 }
  h1 { font-size: 42px; margin-bottom: 20px; margin-top: 20px; padding-bottom: 20px; border-bottom: 1px solid black}
  h2 { font-size: 20px; margin-bottom: 0px; margin-top: 20px;}

  div.verbstem_block { line-height: 30px; margin-bottom: 10px	}
  span.verbstem_no { }
  span.verbstem { font-weight: bold; color: white }

  div.derived_nouns {margin-top: 10px}
  span.translations { }

  div.external_data {margin-top: 10px}
  div.external_data a:link, div.external_data a:visited {color: grey}
  div.provider_name {margin-top: 0px; margin-bottom: 0px; font-size:16px}
  div.provider_content {margin-top: 0px; margin-bottom: 5px; }
	
  form { padding: 10px}
  </style>
</head>

<body>
<div class = "header">
<form action="lookup">
   البحث عن
  <input type="text" name="q" value="$query">
  <input type="submit" value="go">
</form>
</div>

<div class="content">


<div class = "block">
<h1> $root </h1>
#for (s, n) in $stems 
	<div class="verbstem_block">
	    <span class="verbstem_no">$verbstem_to_glyph($s) </span>
	    <span class="verbstem"> <a href="show?rid=$n.rid[1:]"> $n.data.label </a> </span>
	    <span class="translations">
	      $str.join(", ", (t.data["label"] for t in n.out if t.cls == "ForeignNode"))
	    </span>
    </div>
#end for

<h2> أسماء مشتقة </h2>
#for n in $root_derived_nouns
  <a href="show?rid=$n.rid[1:]">$n.data.label</a>
#end for

</div>


#if $verb_node
<div class = "block">

<h1> $verbstem_to_glyph($verb_node.inE[0].data.stem) $verb_node.data.label </h1>
<span class="translations">
  $str.join(", ", (n.data["label"] for n in $verb_node.out if n.cls == "ForeignNode"))
</span>

$render_external_data($verb_data)

<h2> أسماء مشتقة </h2>
#for n in $verb_derived_nouns
  <a href="show?rid=$n.rid[1:]">$n.data.label</a>
#end for

</div>
#end if

#if $noun_node:
<div class = "block">

<h1> $noun_node.data.label </h1>
<span class="translations">
  $str.join(", ", (n.data["label"] for n in $noun_node.out if n.cls == "ForeignNode"))
</span>

$render_external_data($noun_data)

</div>
#end if

</div>
</body>
</html>

